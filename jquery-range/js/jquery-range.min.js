"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function i(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(n){var a={scale:[0,100],step:1,bounceStep:!1,delta:1,displayInfo:!0,displayScale:!0},h=(_createClass(s,[{key:"init",value:function(){return this.range||(this.range=n("<div />",{class:"jquery-range"}),this.slider=n("<div />",{class:"jquery-range__slider"}).appendTo(this.range),this.sliderInner=n("<div />",{class:"jquery-range__slider-inner"}).appendTo(this.slider),this.sliderOuter=n("<div />",{class:"jquery-range__slider-outer"}).appendTo(this.slider),this.handleTo=n("<div />",{class:"jquery-range__slider-handle","data-handle":"to"}).appendTo(this.slider),this.opt.displayScale&&this.addScale(),this.opt.displayInfo&&this.addInfo(),(this.opt.to||this.opt.from)&&this.generate(),this.customize(),this.activate()),this.range}},{key:"generate",value:function(){if(this.opt.to&&(this.inputTo.attr("name","to"),this._updateHandleTo(this._getAbsolutePosition(this.opt.to),this.opt.to)),this.opt.from){var t=this._getAbsolutePosition(this.opt.from);null==this.opt.to&&(this.opt.to=this.opt.scale[this.valuesLength-1],this._updateHandleTo(100,this.opt.to)),this.inputFrom=n("<input />",{type:"hidden",name:"from",value:this.opt.from}).insertBefore(this.inputTo),this.handleFrom=n("<div />",{class:"jquery-range__slider-handle","data-handle":"from"}).css("left",t+"%").appendTo(this.slider),this.sliderInner.css("left",t+"%"),this._updateHandleFrom(t,this.opt.from)}this.opt.displayScale&&this._updateScale()}},{key:"activate",value:function(){this._bindHandle(),this._bindResize()}},{key:"destroy",value:function(){this._unbindHandle(),this._unbindResize()}},{key:"customize",value:function(){switch(this.opt.theme){case"fa":this.handleTo.html('<i class="fa '+this.opt.handle+'" aria-hidden="true"></i>'),this.opt.from&&this.handleFrom.html('<i class="fa '+this.opt.handle+'" aria-hidden="true"></i>'),this.handleTo.css("color",this.opt.handleColor),this.opt.from&&this.handleFrom.css("color",this.opt.handleColor),this.range.addClass("theme-fa");break;case"round":this.range.addClass("theme-round");break;case"quadrate":this.range.addClass("theme-quadrate")}this.slider.css("height",this.opt.sliderHeight),this.sliderInner.css("background",this.opt.innerColor),this.sliderOuter.css("background",this.opt.outerColor),this.handleTo.css({background:this.opt.handleColor,height:this.opt.handleSize,width:this.opt.handleSize,"font-size":this.opt.handleSize,"margin-left":-this.opt.handleSize/2}),this.opt.from&&this.handleFrom.css({background:this.opt.handleColor,height:this.opt.handleSize,width:this.opt.handleSize,"font-size":this.opt.handleSize,"margin-left":-this.opt.handleSize/2})}},{key:"addInfo",value:function(){this.infoTo=n("<div />",{class:"jquery-range__info",text:this.opt.scale[0],"data-handle":"to"}).appendTo(this.range),this.opt.from&&(this.infoFrom=n("<div />",{class:"jquery-range__info --from",text:this.opt.from,"data-handle":"from"}).css("left",this.startPosition+"%").appendTo(this.range))}},{key:"addScale",value:function(){this.scale=n("<div />",{class:"jquery-range__scale"}).appendTo(this.range),this.values=n();for(var t=0;t<this.valuesLength;t++){var e=n("<div />",{class:"jquery-range__scale-value",text:this.opt.scale[t]}).css("left",this.stepPercentage*t+"%").appendTo(this.scale);this.values=this.values.add(e)}}},{key:"_defineStep",value:function(t){for(var e=0;e<this.valuesLength-1;e++)if(t>=this.opt.scale[e]&&t<this.opt.scale[e+1])return e}},{key:"_getAbsolutePosition",value:function(t){var e=this._defineStep(t);return this.stepPercentage*e+(t-this.opt.scale[e])*this._getStepPercentage(e)}},{key:"_getStepPercentage",value:function(t){return this.stepPercentage/((this.opt.scale[t+1]-this.opt.scale[t])/this.opt.step)}},{key:"_bindHandle",value:function(){var s=this;this.__startHandle=function(t){s.handle=t.target.dataset.handle,n(document).on("mousemove touchmove",s.__moveHandle).on("mouseup touchend",s.__offHandle)},this.__moveHandle=function(t){var e=s._definePosition(t);s._updatePosition(e)},this.__offHandle=function(t){s.handle="",n(document).off("mousemove touchmove",s.__moveHandle).off("mouseup touchend",s.__offHandle)},this.handleTo.on("mousedown touchstart",this.__startHandle),this.opt.from&&this.handleFrom.on("mousedown touchstart",this.__startHandle)}},{key:"_unbindHandle",value:function(){this.handleTo.off("mousedown touchstart",this.__startHandle),this.opt.from&&this.handleFrom.off("mousedown touchstart",this.__startHandle),delete this.__startHandle,delete this.__moveHandle,delete this.__offHandle}},{key:"_bindResize",value:function(){var t=this;this.__resize=function(){delete t.__sliderWidth,delete t.__sliderOffsetLeft},n(window).on("resize",this.__resize)}},{key:"_unbindResize",value:function(){n(window).off("resize",this.__resize),this.__resize()}},{key:"_definePosition",value:function(t){var e=void 0;return"touchmove"==t.type?e=(t.originalEvent.touches[0].pageX-this.sliderOffsetLeft)/this.sliderWidth*100:"mousemove"==t.type&&(e=(t.pageX-this.sliderOffsetLeft)/this.sliderWidth*100),e<0?0:100<e?100:e}},{key:"_updateHandleTo",value:function(t,e){this.handleTo.css("left",t+"%"),this.sliderInner.css("right",100-t+"%"),this.opt.displayInfo&&(this.infoTo.css("left",t+"%"),this.infoTo.html(e)),this.inputTo.val(e),this.offsetPercentageTo=t}},{key:"_updateHandleFrom",value:function(t,e){this.handleFrom.css("left",t+"%"),this.sliderInner.css("left",t+"%"),this.infoFrom.css("left",t+"%"),this.infoFrom.html(e),this.inputFrom.val(e),this.offsetPercentageFrom=t}},{key:"_updatePosition",value:function(t){var e=Math.floor(t/this.stepPercentage),s=Math.round(t/this.stepPercentage);100==t&&e--;var i=void 0;if(this.opt.bounceStep)t=s*this.stepPercentage,i=this.opt.scale[s];else{var o=this._getStepPercentage(e);i=this.opt.scale[e]+Math.round((Math.round(t)-this.stepPercentage*e)/o)*this.opt.step}this.opt.to&&this.opt.from?this.offsetPercentageTo-this.offsetPercentageFrom<this.opt.delta?"from"==this.handle?t<this.offsetPercentageFrom&&(this.offsetPercentageFrom=this.offsetPercentage,this._updateHandleFrom(t,i)):t>this.offsetPercentageTo&&(this.offsetPercentageTo=this.offsetPercentage,this._updateHandleTo(t,i)):"from"==this.handle?this._updateHandleFrom(t,i):this._updateHandleTo(t,i):this._updateHandleTo(t,i),this.opt.displayScale&&this._updateScale()}},{key:"_updateScale",value:function(){var t=0,e=Math.round(this.offsetPercentageTo)/this.stepPercentage;this.opt.to&&this.opt.from&&(t=Math.ceil(this.offsetPercentageFrom/this.stepPercentage));for(var s=0;s<this.valuesLength;s++)t<=s&&s<=e?this.values.eq(s).addClass("is-active"):this.values.eq(s).removeClass("is-active")}},{key:"valuesLength",get:function(){return this.opt.scale.length}},{key:"stepPercentage",get:function(){return 100/(this.valuesLength-1)}},{key:"sliderWidth",get:function(){return null==this.__sliderWidth&&(this.__sliderWidth=this.slider.width()),this.__sliderWidth}},{key:"sliderOffsetLeft",get:function(){return null==this.__sliderOffsetLeft&&(this.__sliderOffsetLeft=this.slider.offset().left),this.__sliderOffsetLeft}}]),s);function s(t,e){return _classCallCheck(this,s),this.range=null,this.inputTo=t,this.opt=e,this}n.fn.jQueryRange=function(e,s){if("object"==(void 0===e?"undefined":_typeof(e)))s=e;else if("string"==typeof e){var i=[],t=this.each(function(){var t=n(this).data("_Range");t&&("destroy"==e?t.destroy():void 0!==a[e]&&(void 0!==s?t.settings[e]=s:i.push(t.settings[e])))});return 1==i.length?i[0]:0<i.length?i:t}var o=n.extend({},a,s||{});return this.each(function(){var t=n(this),e=new h(t,o);e.init().insertAfter(t),t.data("_Range",e)})}}(jQuery);